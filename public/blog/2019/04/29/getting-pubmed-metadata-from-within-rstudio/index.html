<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">

		
		<title>Getting PubMed metadata with RISmed directly into RStudio &middot; Catherine Blatter</title>
		

		
			
		

		

		
		


<link href='/js/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



		

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
<meta name="application-name" content="Catherine Blatter"/>
<meta name="msapplication-TileColor" content="#002B36" />
<meta name="msapplication-TileImage" content="/mstile-144x144.png" />
<meta name="theme-color" content="#ffffff">

<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Catherine Blatter">

<link href="/css/featherlight.min.css" type="text/css" rel="stylesheet" />

<script async defer src="https://buttons.github.io/buttons.js"></script>


		<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
		<link rel="stylesheet" href="/css/poole.css">
		<link rel="stylesheet" href="/css/syntax.css">
		<link rel="stylesheet" href="/css/hyde.css">
		
		
		<link rel="stylesheet" href="/css/hamburgers.css">
		
		<link rel="stylesheet" href="/css/custom.css">
		
		<link href="" rel="alternate" type="application/rss+xml" title="Catherine Blatter">
		<link href="/blog/2019/04/29/getting-pubmed-metadata-from-within-rstudio" rel="canonical">
	</head>

	<body class="base16-solarized-cath  h-entry">
		<main class="content container" role="main">
			<article class="post">
				<header>
					<a class="u-url" href="/blog/2019/04/29/getting-pubmed-metadata-from-within-rstudio">
						<h1 class="post-title p-name">Getting PubMed metadata with RISmed directly into RStudio</h1>
					</a>
					<h3 class="post-author">Catherine Blatter</h3>
					<time class="post-date dt-published" datetime="2019-04-29T00:00:00Z">Monday, 29 April 2019</time>
					
				</header>
				<main class="post-content e-content">
					

<div id="TOC">
<ul>
<li><a href="#what-is-this-post-about">What is this post about?</a></li>
<li><a href="#introduction---what-were-the-problems-i-faced">Introduction - what were the problems I faced?</a></li>
<li><a href="#rismed-package">RISmed package</a><ul>
<li><a href="#how-to-use-rismed">How to use RISmed?</a></li>
</ul></li>
<li><a href="#how-could-my-thesis-profit-from-the-rismed-package">How could my thesis profit from the RISmed package?</a></li>
</ul>
</div>

<div id="what-is-this-post-about" class="section level2">
<h2>What is this post about?</h2>
<ul>
<li><p>For my master‚Äôs thesis (stay tuned üòé) I came at
a point where I was interested in having a closer look at publication meta data (e.g.¬†publications per year)</p></li>
<li><p>PubMed usually does provide this service when you execute your search, for some reason it failed
for my query</p></li>
<li><p>Being taught basic statistics I was determined to find a way to create
the image myself‚Ä¶ and came across the amazing RISmed-üì¶</p></li>
</ul>
<p>‚û°Ô∏è This blog post highlights how I used the RISmed package
and gives short code examples</p>
</div>
<div id="introduction---what-were-the-problems-i-faced" class="section level2">
<h2>Introduction - what were the problems I faced?</h2>
<p>The topic of my master‚Äôs thesis - <em>unfinished / missed / rationed nursing care</em> - is an
important topic in health services research with growing numbers of publications over
the last years. Altough I did not have to use R extensively during my thesis, in one
specific case I greatly profited from it:</p>
<p>Usually, PubMed provides a small graphical display of the yearly publication
count on each query as shown in the image below:</p>
<div class="figure">
<img src="/images/pubmed_yearcount.png" alt="PubMed year count" />
<p class="caption">PubMed year count</p>
</div>
<p>For some reason it failed for my exact search query. This was especially bad
because I had to make a somehow valid statement that the publication numbers were
increasing over the last years.
If I only could get all meta data (i.e.¬†years) from my query (~900) into a spreadsheet‚Ä¶<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>At some point I realized that the PubMed database should be accessible and I was sure
that R has a solution to it - that‚Äôs how I found the <a href="https://cran.r-project.org/web/packages/RISmed/RISmed.pdf">RISmed-package</a>.</p>
</div>
<div id="rismed-package" class="section level2">
<h2>RISmed package</h2>
<p>In short: the RISmed package provides functions to extract bibliographic information from<br />
the NCBI databases. In other words: you can extract the information from PubMed through
R code - exactly what I needed!</p>
<div id="how-to-use-rismed" class="section level3">
<h3>How to use RISmed?</h3>
<p>First you need to install <code>install.packages(&quot;RISmed&quot;)</code> or load the package:</p>
<pre class="r"><code># load necessary packages
library(tidyverse)
library(RISmed)</code></pre>
<p>Then you specify the search_topic and search_query:</p>
<pre class="r"><code># build the search topic
search_topic &lt;- &#39;missed care [TI] OR implicit rationing [TI] OR unfinished care [TI]&#39;

# the EUtilsSummary()-function gets information on your search results
# (maximum results set as 1000, years between 1980 and 2019)
search_query &lt;- EUtilsSummary(search_topic, retmax=1000, mindate=1980,maxdate=2019)</code></pre>
<p><code>summary()</code> and <code>QueryId</code> get you quick overview of your results:</p>
<pre class="r"><code># Printing the summary displays the actual results that are available
summary(search_query)</code></pre>
<pre><code>## Query:
## missed care[TI] OR implicit rationing[TI] OR unfinished care[TI] AND 1980[EDAT] : 2019[EDAT] 
## 
## Result count:  65</code></pre>
<pre class="r"><code># see the PMIIDs of our returned query
QueryId(search_query)</code></pre>
<pre><code>##  [1] &quot;31850645&quot; &quot;31845542&quot; &quot;31773131&quot; &quot;31680364&quot; &quot;31596988&quot; &quot;31583822&quot;
##  [7] &quot;31529752&quot; &quot;31334567&quot; &quot;31305955&quot; &quot;30937945&quot; &quot;30866129&quot; &quot;30686577&quot;
## [13] &quot;30681485&quot; &quot;30589706&quot; &quot;30475323&quot; &quot;30303195&quot; &quot;30303194&quot; &quot;30303193&quot;
## [19] &quot;30145041&quot; &quot;30095046&quot; &quot;29791753&quot; &quot;29677025&quot; &quot;29569380&quot; &quot;29554590&quot;
## [25] &quot;29471742&quot; &quot;29281908&quot; &quot;28978300&quot; &quot;28971888&quot; &quot;28960457&quot; &quot;28844649&quot;
## [31] &quot;28599196&quot; &quot;27556651&quot; &quot;27492884&quot; &quot;27322941&quot; &quot;27292861&quot; &quot;27234155&quot;
## [37] &quot;29718634&quot; &quot;26947419&quot; &quot;26259338&quot; &quot;26032730&quot; &quot;25794946&quot; &quot;25563066&quot;
## [43] &quot;25430513&quot; &quot;24681453&quot; &quot;24681452&quot; &quot;24481345&quot; &quot;24397252&quot; &quot;24248553&quot;
## [49] &quot;23991529&quot; &quot;23334645&quot; &quot;23084600&quot; &quot;22674763&quot; &quot;20661063&quot; &quot;19590471&quot;
## [55] &quot;18055900&quot; &quot;16323493&quot; &quot;11467274&quot; &quot;10862990&quot; &quot;9694173&quot;  &quot;10173241&quot;
## [61] &quot;8611380&quot;  &quot;7549650&quot;  &quot;7549649&quot;  &quot;7795458&quot;  &quot;8332926&quot;</code></pre>
<p>If you think your query gets you a reasonable number of results you can then
further information on your records (i.e.¬†dowloading the information):</p>
<pre class="r"><code># get the actual data from PubMed and store them in an object called records
records &lt;- EUtilsGet(search_query, type = &quot;efetch&quot;, db = &quot;pubmed&quot;)

# check what kind of object &quot;records&quot; is
class(records)</code></pre>
<pre><code>## [1] &quot;Medline&quot;
## attr(,&quot;package&quot;)
## [1] &quot;RISmed&quot;</code></pre>
<p>For creating your final dataframe to analyse the data, you need to extract information
as requested. You can choose either dataframe or list to store the results. Careful:
If you extract <code>Author()</code> you need to choose list, otherwise the variable is dropped.</p>
<pre class="r"><code># store it in either list or dataframe (Author() returns a list, therefore 
# list chosen here)
pubmed_data_list &lt;- list(&#39;Title&#39; = ArticleTitle(records), 
                         &#39;Authors&#39; = Author(records), 
                         &#39;Year&#39; = YearPubmed(records), 
                         &#39;Journal&#39; = Title(records),
                         &#39;PublicationType&#39; = PublicationType(records),
                         &#39;Language&#39; = Language(records))

# version without Authors for dataframe
pubmed_data &lt;- data.frame(&#39;Title&#39; = ArticleTitle(records),
                    &#39;Year&#39; = YearPubmed(records), 
                    &#39;Journal&#39; = Title(records),
                    &#39;Language&#39; = Language(records))</code></pre>
<p>Finally, I could visually explore the year count:</p>
<pre class="r"><code># plot the yearcount
ggplot(pubmed_data, aes(x = factor(Year))) +
  geom_bar() +
  scale_y_discrete() +
  labs(x = &quot;Year&quot;,
       y = &quot;No. of publications&quot;) +
  theme_classic()</code></pre>
<p><img src="/blog/2019/2019-04-29-getting-pubmed-metadata-from-within-rstudio_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
</div>
<div id="how-could-my-thesis-profit-from-the-rismed-package" class="section level2">
<h2>How could my thesis profit from the RISmed package?</h2>
<p>The figure I created<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> helped me visualize meta information on the publications:
I could clearly see that the topic <em>unfinished nursing care</em> has been mentioned
with increasing tendency in publications. This gave me valid data for accepting my assumption.</p>
<p>Due to the nature of my thesis, I (sadly) didn‚Äôt have to use the exact numbers. Yet, I still
learned two useful things üí°:</p>
<ol style="list-style-type: decimal">
<li><p>Using bibliographic information to inform your research may be helpful and should
not be forgotten.</p></li>
<li><p>I felt like I reached a whole new level of R‚Äôs numerous capabilities: Using an
R package to connect to a web-database should not be the end of my discoveries üòÉ</p></li>
</ol>
<p><em>Notes on this post</em>:</p>
<ul>
<li><p>Be careful with the search query - there can be differences in using different codes, see here:
<a href="https://stackoverflow.com/questions/32994991/r-package-rismed-different-results-using-the-eutilsget-or-summary-function" class="uri">https://stackoverflow.com/questions/32994991/r-package-rismed-different-results-using-the-eutilsget-or-summary-function</a></p></li>
<li><p>Dowloading information from PubMed (<code>EUtilsGet()</code>) can take a while</p></li>
<li><p>I had some trouble with long search terms (no further explanation found)</p></li>
</ul>
<div id="other-resources-i-used" class="section level4">
<h4>Other resources I used</h4>
<ul>
<li><a href="https://datascienceplus.com/search-pubmed-with-rismed/" class="uri">https://datascienceplus.com/search-pubmed-with-rismed/</a><br />
</li>
<li><a href="https://www.r-bloggers.com/how-to-search-pubmed-with-rismed-package-in-r/" class="uri">https://www.r-bloggers.com/how-to-search-pubmed-with-rismed-package-in-r/</a><br />
</li>
<li><a href="https://www.rdocumentation.org/packages/RISmed/versions/2.1.4" class="uri">https://www.rdocumentation.org/packages/RISmed/versions/2.1.4</a></li>
</ul>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Actually, PubMed does provide this service in a user friendly way: Execute your
search query, choose the results you want, then go to <em>Send to</em> -&gt; <em>File</em> and you
get a .csv-file.<br />
But hey, who does it this way when you can extract it with an
R package?<a href="#fnref1" class="footnote-back">‚Ü©</a></p></li>
<li id="fn2"><p>(not the figure above, as the sample string I used in this post
was not as comprehensive as the full search string used in my thesis)<a href="#fnref2" class="footnote-back">‚Ü©</a></p></li>
</ol>
</div>

				</main>
				<footer class="footer">
				  <hr>
					
					<span>
						Category:
						<a class="p-category" href="/categories/code/">Code</a>, <a class="p-category" href="/categories/research-helpers/">Research helpers</a>
					</span>
					
					
					<p>
						Tags:
						<a class="p-category" href="/tags/rismed/">RISmed</a>, <a class="p-category" href="/tags/data-wrangling/">Data wrangling</a>

					</p>
					
				</footer>
			</article>
		</main>
			  <button class="hamburger hamburger--arrow is-active" type="button" onclick="document.getElementsByClassName('sidebar')[0].classList.toggle('collapsed');document.getElementsByClassName('content')[0].classList.toggle('expanded');document.getElementsByClassName('hamburger')[0].classList.toggle('is-active');document.getElementsByClassName('hamburger-inner')[0].classList.toggle('is-active')">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
    </button> 
		<aside class="sidebar">
			<div class="container sidebar-sticky">
				<header class="sidebar-about h-card vcard p-author">
					
					<a class="u-url u-uid" rel="me" href="/">
						<img class="u-photo" src="/images/catherine.png" width=128 height=128 />
					</a>
					

					
					<span class="site-title u-name fn">
					  <a class="u-url u-uid" rel="me" href="/">Catherine Blatter</a>
				  </span>
					

					<p class="lead p-note">
						 RN, MScN | #rstats | likes bikes, data &amp; the nordic outdoors üá≥üá¥üá∏üá™üáÆüá∏ 
					</p>

					<nav>
						<ul class="sidebar-nav">
							
							<li><a href="/about/"> About </a></li>
							
							<li><a href="/blog/"> Posts </a></li>
							
						</ul>
					</nav>

					
						<aside class="contact">
						  
							  <h3 class="contact-head">Links</h3>
						  
							<ul class="contact-list">
								
								<li>
									
									  
		  						    <i class='fa fa-twitter fa-fw'></i>
		  						  
		  							<a href="https://twitter.com/cathblatter" class="u-url url" rel="me">
		  							  Twitter
		  							</a>
								
								</li>
								
								<li>
									
									  
		  						    <i class='fa fa-github fa-fw'></i>
		  						  
		  							<a href="https://github.com/cathblatter" class="u-url url" rel="me">
		  							  GitHub
		  							</a>
								
								</li>
								
							</ul>
						</aside>
					
				</header>

				<footer>&copy; 2020. All rights reserved. </footer>
			</div>
		</aside>

		  <footer>
  <script src="/js/jquery-latest.js"></script>
<script src="/js/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

  
  
  

  <script src="/js/highlight.js/9.11.0/highlight.min.js"></script>
  
  
  
  <script src="/js/highlight.js/9.11.0/languages/r.min.js"></script>
  <script src="/js/highlight.js/9.11.0/languages/yaml.min.js"></script>
  <script src="/js/highlight.js/9.11.0/languages/bash.min.js"></script>
  <script src="/js/highlight.js/9.11.0/languages/tex.min.js"></script>
  <script src="/js/highlight.js/9.11.0/languages/sql.min.js"></script>
  <script src="/js/highlight.js/9.11.0/languages/markdown.min.js"></script>
  <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
  

 
  

  
  </footer>
  </body>
</html>

	</body>
</html>
